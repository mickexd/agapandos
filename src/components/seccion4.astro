---
import "../animated-button/animated-button.css";
import GSAPCarousel from "./GSAPCarousel.astro";

// Images for Cabañas Grandes
const grandesImages = [
  { src: "/images/grandes/grande.jpg", alt: "Cabaña Grande" },
  {
    src: "/images/grandes/Recamara cama King.jpg",
    alt: "Recámara con cama King",
  },
  {
    src: "/images/grandes/Habitacion cama Queen.jpg",
    alt: "Habitación con cama Queen",
  },
  {
    src: "/images/grandes/Habitacion cama Queen_2.jpg",
    alt: "Habitación Queen vista 2",
  },
  {
    src: "/images/grandes/Recamara 6 camas.jpg",
    alt: "Recámara con 6 camas individuales",
  },
  {
    src: "/images/grandes/Recamara 6 cama.jpg",
    alt: "Recámara 6 camas vista 2",
  },
  { src: "/images/grandes/Cocina Comedor.jpg", alt: "Cocina comedor" },
  {
    src: "/images/grandes/Cocina Comedor_2.jpg",
    alt: "Cocina comedor vista 2",
  },
  {
    src: "/images/grandes/Estancia con chimenea.jpg",
    alt: "Estancia con chimenea",
  },
  {
    src: "/images/grandes/Estancia con chimenea_2.jpg",
    alt: "Estancia chimenea vista 2",
  },
  {
    src: "/images/grandes/Estancia con chimena_v2.JPG",
    alt: "Estancia chimenea vista 3",
  },
  { src: "/images/grandes/Estancia.jpg", alt: "Estancia" },
  { src: "/images/grandes/chimenea.jpg", alt: "Chimenea" },
  { src: "/images/grandes/king.jpg", alt: "Cama King" },
  { src: "/images/grandes/queen.jpg", alt: "Cama Queen" },
];

// Images for Cabañas Chicas
const chicasImages = [
  { src: "/images/chicas/chica.jpg", alt: "Cabaña Chica" },
  {
    src: "/images/chicas/Recamara cama Queen.jpg",
    alt: "Recámara con cama Queen",
  },
  {
    src: "/images/chicas/Recamara cama Queen_v2.jpg",
    alt: "Recámara Queen vista 2",
  },
  {
    src: "/images/chicas/Recamara cama Queen_v3.JPG",
    alt: "Recámara Queen vista 3",
  },

  {
    src: "/images/chicas/Recamara individual y litera_v2.jpg",
    alt: "Recámara individual y litera vista 2",
  },
  { src: "/images/chicas/camas.jpg", alt: "Camas" },
  { src: "/images/chicas/Baño.jpg", alt: "Baño" },
  { src: "/images/chicas/cocina.jpg", alt: "Cocina" },
  { src: "/images/chicas/Comedor.png", alt: "Comedor" },
  {
    src: "/images/chicas/Estancia con chimenea.jpg",
    alt: "Estancia con chimenea",
  },
  { src: "/images/chicas/Estancia con chimena.jpg", alt: "Estancia chimenea" },
  { src: "/images/chicas/Chimenea.jpg", alt: "Chimenea" },
  { src: "/images/chicas/estancia.jpg", alt: "Estancia" },
];
---

<section class="relative w-full md:px-8 py-16 md:py-20">
  <div class="flex flex-col items-center w-full max-w-none">
    <h1
      class="text-4xl md:text-6xl text-white italianno-regular text-center mb-8"
    >
      Galeria
    </h1>
    <div class="text-center mb-8">
      <button
        onclick="toggleGallery()"
        class="bg-white text-black px-4 py-2 text-base md:px-6 md:py-3 md:text-lg rounded-full hover:bg-gray-200 transition-colors duration-300 font-medium"
        id="toggle-button-text"
      >
        Ver cabañas chicas
      </button>
    </div>

    <div id="grandes-gallery" class="gallery-section w-full">
      <p
        class="text-white text-center text-4xl md:text-6xl mb-4 italianno-regular"
      >
        Estás viendo: Cabañas Grandes
      </p>
      <div class="bg-transparent w-full py-4">
        <GSAPCarousel images={grandesImages} type="grandes" />
      </div>
    </div>

    <!-- -------------------------------------------------------------------------------- -->

    <div id="chicas-gallery" class="gallery-section hidden w-full">
      <p
        class="text-white text-center text-4xl md:text-6xl mb-4 italianno-regular"
      >
        Estás viendo: Cabañas Chicas
      </p>
      <div class="bg-transparent w-full py-4">
        <GSAPCarousel images={chicasImages} type="chicas" />
      </div>
    </div>
  </div>
</section>

<style>
  .hidden {
    display: none;
  }
  .gallery-section {
    width: 100%;
    min-height: fit-content;
    overflow: visible;
  }
  #grandes-gallery {
    opacity: 1;
  }
  #chicas-gallery {
    opacity: 0;
  }
</style>

<script>
  import { gsap } from "gsap";

  let showingChicas = false;

  function toggleGallery() {
    const grandesGallery = document.getElementById("grandes-gallery");
    const chicasGallery = document.getElementById("chicas-gallery");
    const toggleButton = document.getElementById("toggle-button-text");

    const tl = gsap.timeline();

    if (showingChicas) {
      // Switch to grandes: fade out chicas, fade in grandes
      tl.to(chicasGallery, { opacity: 0, duration: 0.5, ease: "power2.out" })
        .set(chicasGallery, { display: "none" })
        .set(grandesGallery, { display: "block", opacity: 0 })
        .to(grandesGallery, { opacity: 1, duration: 0.5, ease: "power2.out" });
      if (toggleButton) toggleButton.textContent = "Ver cabañas chicas";
      showingChicas = false;
    } else {
      // Switch to chicas: fade out grandes, fade in chicas
      tl.to(grandesGallery, { opacity: 0, duration: 0.5, ease: "power2.out" })
        .set(grandesGallery, { display: "none" })
        .set(chicasGallery, { display: "block", opacity: 0 })
        .to(chicasGallery, { opacity: 1, duration: 0.5, ease: "power2.out" });
      if (toggleButton) toggleButton.textContent = "Ver cabañas grandes";
      showingChicas = true;
    }

    // Trigger gallery re-initialization for smooth animations
    tl.call(() => {
      document.dispatchEvent(new CustomEvent("galleryToggled"));
    });
  }

  // Make function globally available
  window.toggleGallery = toggleGallery;
</script>
